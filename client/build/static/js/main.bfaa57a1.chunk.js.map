{"version":3,"sources":["Components/Header.js","Components/MUInput.js","Components/LoginForm.js","pages/Login.js","Components/FriendsTab.js","Components/MessagesTab.js","Components/MainChat.js","pages/Chat.js","Components/ProtectedRoute.js","Components/RegisterForm.js","pages/Register.js","App.js","serviceWorker.js","states/reducers/authReducer.js","states/reducers/chatReducer.js","states/reducers/rootReducer.js","states/sagas/authSaga.js","states/sagas/sagas.js","index.js"],"names":["useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","connect","state","loggedIn","auth","dispatch","logOut","type","classes","AppBar","position","Toolbar","IconButton","edge","className","color","aria-label","Typography","variant","Button","onClick","to","style","textDecoration","fullWidth","width","MUInput","label","value","errorMessage","onChange","TextField","helperText","error","length","center","textAlign","mgTop","marginTop","inputFields","errorMessages","userLogin","payload","setInputFields","resetIE","history","useHistory","useEffect","unlisten","listen","location","action","useState","keep","setKeep","handleLogin","e","a","Grid","item","container","direction","xs","md","username","target","password","FormHelperText","other","FormControlLabel","control","Checkbox","checked","name","size","push","Login","document","justify","Friends","socket","friends","selectedIndex","setSelectedIndex","useLayoutEffect","updateSize","ref","current","setProperty","getElementById","clientHeight","window","addEventListener","removeEventListener","useRef","Box","component","sm","lg","xl","display","List","overflowY","map","index","ListItem","key","button","selected","handleContactChange","ListItemAvatar","Avatar","alt","src","ListItemText","primary","scrollToBottom","div","scrollTop","scrollHeight","MessagesTab","setFriends","user","io","on","msg","temp","sender","console","log","friend","receiver","messages","message","pending","senderIsFriend","setMessage","paddingLeft","id","padding","CircularProgress","height","emit","chat","React","Chat","wrap","alignItems","ProtectedRoute","Component","condition","redirectTo","rest","render","props","userAvailable","userRegister","checkUserName","handleRegister","Register","isLoading","checkLogin","path","exact","Boolean","hostname","match","emptyInputs","emptyError","initialState","loginReducer","chatReducer","rootReducer","combineReducers","authReducer","userLogout","put","call","fetch","res","json","data","newAction","method","headers","body","JSON","stringify","status","info","result","mySaga","takeLatest","enhanser","store","sagaMiddleware","createSagaMiddleware","compose","applyMiddleware","__REDUX_DEVTOOLS_EXTENSION__","createStore","err","run","ReactDOM","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.bfaa57a1.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Button,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nfunction Header({ loggedIn, logOut }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar>\r\n        <IconButton\r\n          edge=\"start\"\r\n          className={classes.menuButton}\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n        ></IconButton>\r\n        <Typography variant=\"h6\" className={classes.title}>\r\n          Chat\r\n        </Typography>\r\n        {loggedIn ? (\r\n          <Button color=\"inherit\" onClick={logOut}>\r\n            Logout\r\n          </Button>\r\n        ) : (\r\n          <Button color=\"inherit\">\r\n            <Link\r\n              to=\"/login\"\r\n              style={{ textDecoration: \"none\", color: \"white\" }}\r\n            >\r\n              Login\r\n            </Link>\r\n          </Button>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    loggedIn: state.auth.loggedIn,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    logOut: () => dispatch({ type: \"USER_LOGOUT\" }),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\r\n","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n});\r\n\r\nexport default function MUInput({\r\n  label,\r\n  value,\r\n  type,\r\n  errorMessage,\r\n  onChange,\r\n}) {\r\n  const classes = useStyles();\r\n  return (\r\n    <TextField\r\n      variant=\"outlined\"\r\n      type={type}\r\n      className={classes.fullWidth}\r\n      label={label}\r\n      value={value}\r\n      helperText={errorMessage}\r\n      error={errorMessage ? errorMessage.length !== 0 : false}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Typography,\r\n  Button,\r\n  Grid,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  FormHelperText,\r\n} from \"@material-ui/core\";\r\nimport MUInput from \"../Components/MUInput\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n  center: {\r\n    textAlign: \"center\",\r\n  },\r\n  mgTop: {\r\n    marginTop: \"15px\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n});\r\n\r\nfunction LoginForm({\r\n  userLogin,\r\n  errorMessages,\r\n  inputFields,\r\n  setInputFields,\r\n  resetIE,\r\n}) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const unlisten = history.listen((location, action) => {\r\n      resetIE();\r\n    });\r\n    return () => {\r\n      unlisten();\r\n    };\r\n  }, [history, resetIE]);\r\n\r\n  const [keep, setKeep] = useState(true);\r\n\r\n  const handleLogin = async (e) => {\r\n    userLogin({ ...inputFields, keep, history });\r\n  };\r\n\r\n  return (\r\n    <Grid\r\n      item\r\n      container\r\n      spacing={2}\r\n      direction=\"column\"\r\n      className={classes.mgTop}\r\n      xs={10}\r\n      md={4}\r\n    >\r\n      <Typography className={classes.center} variant=\"h2\">\r\n        Login\r\n      </Typography>\r\n      <Grid item>\r\n        <MUInput\r\n          label=\"User Name\"\r\n          type=\"text\"\r\n          value={inputFields.username}\r\n          onChange={(e) => {\r\n            setInputFields({ ...inputFields, username: e.target.value });\r\n          }}\r\n          errorMessage={errorMessages.username}\r\n        />\r\n      </Grid>\r\n      <Grid item>\r\n        <MUInput\r\n          label=\"Password\"\r\n          type=\"Password\"\r\n          value={inputFields.password}\r\n          onChange={(e) => {\r\n            setInputFields({ ...inputFields, password: e.target.value });\r\n          }}\r\n          errorMessage={errorMessages.password}\r\n        />\r\n      </Grid>\r\n      <FormHelperText error>{errorMessages.other}</FormHelperText>\r\n      <Grid item>\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={keep}\r\n              onChange={() => setKeep(!keep)}\r\n              name=\"checkedB\"\r\n              color=\"primary\"\r\n            />\r\n          }\r\n          label=\"Keep Me Logged In\"\r\n        />\r\n      </Grid>\r\n      <Grid item>\r\n        <Button\r\n          className={classes.fullWidth}\r\n          size=\"large\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handleLogin}\r\n        >\r\n          Login\r\n        </Button>\r\n      </Grid>\r\n      <Button onClick={() => history.push(\"/register\")}> Register </Button>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    inputFields: state.auth.inputFields,\r\n    errorMessages: state.auth.errorMessages,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    userLogin: (payload) =>\r\n      dispatch({\r\n        type: \"USER_LOGIN\",\r\n        payload,\r\n      }),\r\n    setInputFields: (payload) =>\r\n      dispatch({ type: \"SET_INPUT_FIELDS\", payload }),\r\n    resetIE: () => dispatch({ type: \"RESET_IE\" }),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\r\n","import React, { useEffect } from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport Header from \"../Components/Header\";\r\nimport LoginForm from \"../Components/LoginForm\";\r\n\r\nfunction Login() {\r\n  useEffect(() => {\r\n    document.title = \"Login\";\r\n  }, []);\r\n\r\n  return (\r\n    <Grid container direction=\"row\" justify=\"center\">\r\n      <Header />\r\n      <Grid item xs={1} md={4} />\r\n      <LoginForm />\r\n      <Grid item xs={1} md={4} />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useRef, useLayoutEffect } from \"react\";\r\nimport {\r\n  Grid,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  Avatar,\r\n  Typography,\r\n  Box,\r\n  ListItemText,\r\n} from \"@material-ui/core\";\r\n\r\nfunction Friends({ friends, selectedIndex, setSelectedIndex }) {\r\n  useLayoutEffect(() => {\r\n    function updateSize() {\r\n      ref.current.style.setProperty(\r\n        \"height\",\r\n        `${document.getElementById(\"root\").clientHeight - 124}px`\r\n      );\r\n    }\r\n    window.addEventListener(\"resize\", updateSize);\r\n    updateSize();\r\n    return () => window.removeEventListener(\"resize\", updateSize);\r\n  }, []);\r\n\r\n  const handleContactChange = (index) => {\r\n    setSelectedIndex(index);\r\n  };\r\n\r\n  const ref = useRef();\r\n\r\n  return (\r\n    <Box\r\n      item\r\n      component={Grid}\r\n      sm={4}\r\n      lg={3}\r\n      xl={2}\r\n      display={{ xs: \"none\", sm: \"block\" }}\r\n    >\r\n      <Typography variant=\"h4\">Friends</Typography>\r\n      <List\r\n        ref={ref}\r\n        style={{\r\n          overflowY: \"scroll\",\r\n        }}\r\n      >\r\n        {friends.map((item, index) => {\r\n          return (\r\n            <ListItem\r\n              key={index}\r\n              button\r\n              selected={selectedIndex === index}\r\n              onClick={() => handleContactChange(index)}\r\n            >\r\n              <ListItemAvatar>\r\n                <Avatar\r\n                  alt={item.username}\r\n                  src={`/static/images/avatar/${index + 1}.jpg`}\r\n                />\r\n              </ListItemAvatar>\r\n              <ListItemText primary={item.username} />\r\n            </ListItem>\r\n          );\r\n        })}\r\n      </List>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Friends;\r\n","import React, { useState, useEffect, useLayoutEffect, useRef } from \"react\";\r\nimport {\r\n  Grid,\r\n  List,\r\n  Typography,\r\n  Button,\r\n  ListItemText,\r\n  TextField,\r\n  CircularProgress,\r\n  ListItem,\r\n} from \"@material-ui/core\";\r\n\r\nimport io from \"socket.io-client\";\r\n\r\nlet socket;\r\n\r\nfunction scrollToBottom() {\r\n  var div = document.getElementById(\"list\");\r\n  div.scrollTop = div.scrollHeight - div.clientHeight;\r\n}\r\n\r\nfunction MessagesTab({ friends, setFriends, selectedIndex, user }) {\r\n  useEffect(() => {\r\n    socket = io(\"/\");\r\n\r\n    socket.on(user.username, (msg) => {\r\n      let temp;\r\n\r\n      // if the message confirmation\r\n      if (msg.sender === user.username) {\r\n        console.log(\"confirmation\");\r\n        console.log(msg);\r\n\r\n        temp = friends.map((friend) => {\r\n          if (friend.username === msg.receiver) {\r\n            friend.messages = friend.messages.map((message) => {\r\n              console.log(message);\r\n              console.log(message.pending && message.message === msg.message);\r\n              if (message.pending && message.message === msg.message) {\r\n                console.log(message);\r\n                message.pending = false;\r\n              }\r\n              return message;\r\n            });\r\n          }\r\n          return friend;\r\n        });\r\n      }\r\n      // if we received a message from another user\r\n      else {\r\n        let senderIsFriend = false;\r\n\r\n        temp = friends.map((friend) => {\r\n          if (friend.username === msg.sender) {\r\n            senderIsFriend = true;\r\n            friend.messages.push(msg);\r\n          }\r\n          return friend;\r\n        });\r\n\r\n        if (!senderIsFriend)\r\n          temp.push({ username: msg.sender, messages: [msg] });\r\n      }\r\n\r\n      setFriends(temp);\r\n      setMessage(\"\");\r\n      scrollToBottom();\r\n    });\r\n  }, [user.username]);\r\n\r\n  useLayoutEffect(() => {\r\n    function updateSize() {\r\n      ref.current.style.setProperty(\r\n        \"height\",\r\n        `${document.getElementById(\"root\").clientHeight - 185}px`\r\n      );\r\n      scrollToBottom();\r\n    }\r\n    window.addEventListener(\"resize\", updateSize);\r\n    updateSize();\r\n    return () => window.removeEventListener(\"resize\", updateSize);\r\n  }, []);\r\n\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const ref = useRef();\r\n\r\n  const handleSendMessage = () => {\r\n    setMessage(\"\");\r\n\r\n    const receiver = {\r\n      receiver: friends[selectedIndex].username,\r\n      message,\r\n      pending: true,\r\n    };\r\n    console.log(receiver);\r\n\r\n    socket.emit(\"message\", receiver);\r\n\r\n    const temp = friends.map((friend) => {\r\n      if (friend.username === receiver.receiver) {\r\n        friend.messages.push({\r\n          sender: user.username,\r\n          message,\r\n          pending: true,\r\n        });\r\n      }\r\n      return friend;\r\n    });\r\n    setFriends(temp);\r\n    scrollToBottom();\r\n  };\r\n\r\n  return (\r\n    <Grid\r\n      item\r\n      container\r\n      style={{ paddingLeft: 15 }}\r\n      direction=\"column\"\r\n      xs={12}\r\n      sm={8}\r\n      lg={9}\r\n      xl={10}\r\n    >\r\n      <Grid item container direction=\"column\" justify=\"flex-end\">\r\n        <Typography variant=\"h4\">\r\n          {friends.length > 0 ? friends[selectedIndex].username : \"Messages\"}\r\n        </Typography>\r\n        <List\r\n          id=\"list\"\r\n          ref={ref}\r\n          style={{\r\n            overflowY: \"scroll\",\r\n          }}\r\n        >\r\n          {friends.length > 0 && friends[selectedIndex].messages.length > 0\r\n            ? friends[selectedIndex].messages.map((message, index) => (\r\n                <ListItem style={{ padding: 0 }} key={index}>\r\n                  <ListItemText>{`${message.sender}: ${message.message}`}</ListItemText>\r\n                  {message.pending ? <CircularProgress size={25} /> : null}\r\n                </ListItem>\r\n              ))\r\n            : null}\r\n        </List>\r\n      </Grid>\r\n      <Grid item container>\r\n        <Grid item xs={10}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            type=\"text\"\r\n            style={{ width: \"100%\" }}\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={2}>\r\n          <Button\r\n            style={{ height: \"100%\", width: \"100%\" }}\r\n            variant=\"text\"\r\n            onClick={handleSendMessage}\r\n          >\r\n            Send\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default MessagesTab;\r\n","import React, { useLayoutEffect, useRef } from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport Friends from \"./FriendsTab\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport MessagesTab from \"./MessagesTab\";\r\n\r\nfunction MainChat({ user, friends, setFriends }) {\r\n  useLayoutEffect(() => {\r\n    function updateSize() {\r\n      ref.current.style.setProperty(\r\n        \"height\",\r\n        `${document.getElementById(\"root\").clientHeight - 65}px`\r\n      );\r\n    }\r\n    window.addEventListener(\"resize\", updateSize);\r\n    updateSize();\r\n    return () => window.removeEventListener(\"resize\", updateSize);\r\n  }, []);\r\n\r\n  const [selectedIndex, setSelectedIndex] = React.useState(0);\r\n\r\n  const ref = useRef();\r\n\r\n  return (\r\n    <Grid item container direction=\"row\" ref={ref}>\r\n      <Friends\r\n        friends={friends}\r\n        selectedIndex={selectedIndex}\r\n        setSelectedIndex={setSelectedIndex}\r\n      />\r\n      <MessagesTab\r\n        user={user}\r\n        friends={friends}\r\n        setFriends={setFriends}\r\n        selectedIndex={selectedIndex}\r\n      />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.auth.user,\r\n    friends: state.chat.friends,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    setFriends: (friends) => {\r\n      dispatch({ type: \"SET_FRIENDS\", payload: { friends } });\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainChat);\r\n","import React, { useEffect } from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport Header from \"../Components/Header\";\r\n\r\nimport MainChat from \"../Components/MainChat\";\r\n\r\nfunction Chat() {\r\n  useEffect(() => {\r\n    document.title = \"Chat\";\r\n  }, []);\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      direction=\"column\"\r\n      wrap=\"nowrap\"\r\n      style={{ height: \"100vh\" }}\r\n      alignItems=\"stretch\"\r\n    >\r\n      <Grid item>\r\n        <Header title=\"Chat\" />\r\n      </Grid>\r\n      <MainChat />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({\r\n  component: Component,\r\n  condition,\r\n  redirectTo,\r\n  ...rest\r\n}) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (condition) return <Component {...rest} {...props} />;\r\n        else return <Redirect to={redirectTo} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useEffect } from \"react\";\r\nimport { Typography, Button, Grid } from \"@material-ui/core\";\r\nimport MUInput from \"../Components/MUInput\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n  center: {\r\n    textAlign: \"center\",\r\n  },\r\n  mgTop: {\r\n    marginTop: \"15px\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n});\r\n\r\nfunction RegisterForm({\r\n  checkUserName,\r\n  userRegister,\r\n  errorMessages,\r\n  inputFields,\r\n  setInputFields,\r\n  resetIE,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const unlisten = history.listen((location, action) => {\r\n      resetIE();\r\n    });\r\n    return () => {\r\n      unlisten();\r\n    };\r\n  }, [history, resetIE]);\r\n\r\n  const handleRegister = async (e) => {\r\n    userRegister({ ...inputFields, history });\r\n  };\r\n\r\n  const handleUserNameChange = (e) => {\r\n    setInputFields({ ...inputFields, username: e.target.value });\r\n    checkUserName(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <Grid\r\n      item\r\n      container\r\n      direction=\"column\"\r\n      className={classes.mgTop}\r\n      xs={10}\r\n      md={4}\r\n      spacing={2}\r\n    >\r\n      <Typography className={classes.center} variant=\"h2\">\r\n        Register\r\n      </Typography>\r\n      <Grid item>\r\n        <MUInput\r\n          label=\"User Name\"\r\n          type=\"text\"\r\n          value={inputFields.username}\r\n          onChange={handleUserNameChange}\r\n          errorMessage={errorMessages.username}\r\n        />\r\n      </Grid>\r\n      <Grid item>\r\n        <MUInput\r\n          label=\"Password\"\r\n          type=\"Password\"\r\n          value={inputFields.password}\r\n          onChange={(e) =>\r\n            setInputFields({ ...inputFields, password: e.target.value })\r\n          }\r\n          errorMessage={errorMessages.password}\r\n        />\r\n      </Grid>\r\n      <Grid item>\r\n        <Button\r\n          className={classes.fullWidth}\r\n          size=\"large\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handleRegister}\r\n          type=\"submit\"\r\n        >\r\n          Register\r\n        </Button>\r\n      </Grid>\r\n      <Button onClick={() => history.push(\"/login\")}> Login </Button>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    inputFields: state.auth.inputFields,\r\n    errorMessages: state.auth.errorMessages,\r\n    userAvailable: state.auth.userAvailable,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    userRegister: (payload) =>\r\n      dispatch({\r\n        type: \"USER_REGISTER\",\r\n        payload,\r\n      }),\r\n    checkUserName: (username) => {\r\n      dispatch({\r\n        type: \"CHECK_USERNAME\",\r\n        payload: { username },\r\n      });\r\n    },\r\n    setInputFields: (payload) =>\r\n      dispatch({ type: \"SET_INPUT_FIELDS\", payload }),\r\n    resetIE: () => dispatch({ type: \"RESET_IE\" }),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm);\r\n","import React, { useEffect } from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport Header from \"../Components/Header\";\r\nimport RegisterForm from \"../Components/RegisterForm\";\r\n\r\nfunction Register() {\r\n  useEffect(() => {\r\n    document.title = \"Register\";\r\n  }, []);\r\n\r\n  return (\r\n    <Grid container direction=\"row\" justify=\"center\">\r\n      <Header title=\"Register\" />\r\n      <Grid item xs={1} md={4} />\r\n      <RegisterForm />\r\n      <Grid item xs={1} md={4} />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React, { useEffect } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Login from \"./pages/Login\";\nimport Chat from \"./pages/Chat\";\nimport ProtectedRoute from \"./Components/ProtectedRoute\";\nimport { connect } from \"react-redux\";\nimport Register from \"./pages/Register\";\n\nfunction App({ checkLogin, loggedIn, isLoading }) {\n  useEffect(() => {\n    console.log(\"App\");\n    checkLogin();\n  }, [checkLogin]);\n\n  //console.log(\"App condition\");\n  if (isLoading) return \"loading\";\n\n  return (\n    <Router>\n      <ProtectedRoute\n        path=\"/\"\n        exact\n        component={Chat}\n        condition={loggedIn}\n        redirectTo=\"/login\"\n      />\n      <ProtectedRoute\n        path=\"/login\"\n        exact\n        component={Login}\n        condition={!loggedIn}\n        redirectTo=\"/\"\n      />\n      <ProtectedRoute\n        path=\"/register\"\n        exact\n        component={Register}\n        condition={!loggedIn}\n        redirectTo=\"/\"\n      />\n      <ProtectedRoute\n        path=\"/chat\"\n        exact\n        component={Chat}\n        condition={loggedIn}\n        redirectTo=\"/login\"\n      />\n    </Router>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    loggedIn: state.auth.loggedIn,\n    isLoading: state.auth.isLoading,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    checkLogin: () => dispatch({ type: \"CHECK_LOGIN\" }),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","// to save time\r\nconst emptyInputs = { username: \"\", password: \"\" };\r\nconst emptyError = { username: \"\", password: \"\", other: \"\" };\r\n\r\nconst initialState = {\r\n  loggedIn: false,\r\n  user: {},\r\n  isLoading: true,\r\n  inputFields: emptyInputs,\r\n  errorMessages: emptyError,\r\n};\r\n\r\nconst loginReducer = (state = initialState, action) => {\r\n  console.log(action);\r\n  switch (action.type) {\r\n    case \"CHECK_LOGIN_ASYNC\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isLoading: false,\r\n      };\r\n    case \"USER_LOGIN_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        loggedIn: true,\r\n        errorMessages: emptyError,\r\n        ...action.payload,\r\n      };\r\n    case \"USER_LOGIN_FAILED\":\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        loggedIn: false,\r\n        user: {},\r\n        ...action.payload,\r\n      };\r\n    case \"USER_REGISTER_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        errorMessages: emptyError,\r\n        isLoading: false,\r\n        loggedIn: false,\r\n        user: {},\r\n      };\r\n    case \"USER_REGISTER_FAILED\":\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        loggedIn: false,\r\n        user: {},\r\n        ...action.payload,\r\n      };\r\n    case \"CHECK_USERNAME_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case \"CHECK_USERNAME_FAILED\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case \"SET_INPUT_FIELDS\":\r\n      return {\r\n        ...state,\r\n        inputFields: action.payload,\r\n      };\r\n    case \"RESET_IE\": {\r\n      return {\r\n        ...state,\r\n        inputFields: emptyInputs,\r\n        errorMessages: emptyError,\r\n      };\r\n    }\r\n\r\n    case \"USER_LOGOUT_ASYNC\":\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        loggedIn: action.loggedIn,\r\n        user: action.user,\r\n        errorMessages: emptyError,\r\n      };\r\n    case \"SET_AUTH_LOADING\":\r\n      return { ...state, isLoading: true };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default loginReducer;\r\n","const initialState = {\r\n  friends: [],\r\n};\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n  console.log(action);\r\n  switch (action.type) {\r\n    case \"SET_FRIENDS\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default chatReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport authReducer from \"./authReducer\";\r\nimport chatReducer from \"./chatReducer\";\r\n\r\nconst rootReducer = combineReducers({ auth: authReducer, chat: chatReducer });\r\n\r\nexport default rootReducer;\r\n","import { put, call } from \"redux-saga/effects\";\r\n\r\n// check if the user is logged in\r\nexport function* checkLogin() {\r\n  yield put({ type: \"SET_AUTH_LOADING\" });\r\n\r\n  let friends;\r\n\r\n  const newAction = yield call(async () => {\r\n    try {\r\n      const res = await fetch(\"/auth/check/loggedin\");\r\n\r\n      const data = await res.json();\r\n\r\n      const loggedIn = data.loggedIn;\r\n      const user = { username: data.user.username };\r\n      friends = data.user.friends;\r\n\r\n      return {\r\n        type: \"CHECK_LOGIN_ASYNC\",\r\n        payload: { loggedIn, user },\r\n      };\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    return { type: \"CHECK_LOGIN_ASYNC\" };\r\n  });\r\n\r\n  if (friends) yield put({ type: \"SET_FRIENDS\", payload: { friends } });\r\n\r\n  yield put(newAction);\r\n}\r\n\r\n// login the user\r\nexport function* userLogin({ payload }) {\r\n  let friends;\r\n  const { username, password, history } = payload;\r\n\r\n  yield put({ type: \"SET_AUTH_LOADING\" });\r\n\r\n  const newAction = yield call(async () => {\r\n    try {\r\n      const res = await fetch(\"/auth/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      switch (res.status) {\r\n        case 200: {\r\n          history.push(\"/chat\");\r\n          let user = await res.json();\r\n\r\n          friends = user.friends;\r\n          user = { username: user.username };\r\n\r\n          return { type: \"USER_LOGIN_SUCCESS\", payload: { user } };\r\n        }\r\n        case 400: {\r\n          const info = await res.json();\r\n          let errorMessages = {};\r\n          if (info.index === 0) errorMessages.username = info.message;\r\n          else errorMessages.password = info.message;\r\n\r\n          return {\r\n            type: \"USER_LOGIN_FAILED\",\r\n            payload: { errorMessages },\r\n          };\r\n        }\r\n        case 500: {\r\n          return {\r\n            type: \"USER_LOGIN_FAILED\",\r\n            payload: {\r\n              errorMessages: {\r\n                other: \"There is a problem with the Server\",\r\n              },\r\n            },\r\n          };\r\n        }\r\n        default: {\r\n          return {\r\n            type: \"USER_LOGIN_FAILED\",\r\n            payload: {\r\n              errorMessages: {\r\n                other: \"Something went Wrong\",\r\n              },\r\n            },\r\n          };\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n\r\n    return {\r\n      type: \"USER_LOGIN_FAILED\",\r\n      payload: {\r\n        errorMessages: {\r\n          other: \"Something went Wrong\",\r\n        },\r\n      },\r\n    };\r\n  });\r\n\r\n  if (friends) yield put({ type: \"SET_FRIENDS\", payload: { friends } });\r\n\r\n  yield put(newAction);\r\n}\r\n\r\n// register the user\r\nexport function* userRegister({ payload }) {\r\n  yield put({ type: \"SET_AUTH_LOADING\" });\r\n\r\n  const newAction = yield call(async () => {\r\n    const { username, password, history } = payload;\r\n\r\n    try {\r\n      const res = await fetch(\"/auth/register\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      switch (res.status) {\r\n        case 200: {\r\n          history.push(\"/login\");\r\n          return {\r\n            type: \"USER_REGISTER_SUCCESS\",\r\n          };\r\n        }\r\n        case 400: {\r\n          const data = await res.json();\r\n          let errorMessages = {};\r\n          if (data.index === 0) errorMessages.username = data.message;\r\n          else errorMessages.password = data.message;\r\n          return {\r\n            type: \"USER_REGISTER_FAILED\",\r\n            payload: { errorMessages },\r\n          };\r\n        }\r\n        case 409: {\r\n          const errorMessage = await res.json();\r\n          return {\r\n            type: \"USER_REGISTER_FAILED\",\r\n            payload: { errorMessages: { username: errorMessage } },\r\n          };\r\n        }\r\n        case 500: {\r\n          return {\r\n            type: \"USER_REGISTER_FAILED\",\r\n            payload: {\r\n              errorMessages: { other: \"There is a problem with the Server\" },\r\n            },\r\n          };\r\n        }\r\n        default: {\r\n          return {\r\n            type: \"USER_REGISTER_FAILED\",\r\n            payload: {\r\n              errorMessages: { other: \"Something went Wrong\" },\r\n            },\r\n          };\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    return {\r\n      type: \"USER_REGISTER_FAILED\",\r\n      payload: {\r\n        errorMessages: { other: \"Something went Wrong\" },\r\n      },\r\n    };\r\n  });\r\n\r\n  yield put(newAction);\r\n}\r\n\r\n// logout the user\r\nexport function* userLogout() {\r\n  yield put({ type: \"USER_LOADING\" });\r\n  const result = yield call(async () => {\r\n    const data = { user: {}, errorMessage: \"\" };\r\n    try {\r\n      const res = await fetch(\"/auth/logout\");\r\n\r\n      if (res.status === 200) {\r\n        data.loggedIn = false;\r\n      }\r\n    } catch (err) {\r\n      console.log(`Error: ${err}`);\r\n      data.loggedIn = false;\r\n    }\r\n    return data;\r\n  });\r\n\r\n  yield put({ type: \"USER_LOGOUT_ASYNC\", ...result });\r\n}\r\n\r\n// check if the username is available\r\nexport function* checkUserName({ payload }) {\r\n  const newAction = yield call(async () => {\r\n    try {\r\n      const { username } = payload;\r\n\r\n      const res = await fetch(\"/auth/check/username\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ username }),\r\n      });\r\n\r\n      switch (res.status) {\r\n        case 200: {\r\n          const userAvailable = await res.json();\r\n          let errorMessages = {};\r\n          if (!userAvailable)\r\n            errorMessages = { username: `User ${username} Already exists` };\r\n          else errorMessages = { username: \"\", other: \"\" };\r\n          return {\r\n            type: \"CHECK_USERNAME_SUCCESS\",\r\n            payload: {\r\n              errorMessages,\r\n            },\r\n          };\r\n        }\r\n        case 500: {\r\n          return {\r\n            type: \"CHECK_USERNAME_FAILED\",\r\n            payload: {\r\n              errorMessage: { other: \"There is a problem with the Server\" },\r\n            },\r\n          };\r\n        }\r\n        default: {\r\n          return {\r\n            type: \"CHECK_USERNAME_FAILED\",\r\n            payload: { errorMessages: { other: \"Something went Wrong\" } },\r\n          };\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    return {\r\n      type: \"CHECK_USERNAME_FAILED\",\r\n      payload: { errorMessages: { other: \"Something went Wrong\" } },\r\n    };\r\n  });\r\n\r\n  yield put(newAction);\r\n}\r\n","import { takeLatest } from \"redux-saga/effects\";\r\nimport {\r\n  checkLogin,\r\n  userLogin,\r\n  userLogout,\r\n  userRegister,\r\n  checkUserName,\r\n} from \"./authSaga\";\r\n\r\nexport default function* mySaga() {\r\n  // auth\r\n  yield takeLatest(\"CHECK_LOGIN\", checkLogin);\r\n  yield takeLatest(\"USER_REGISTER\", userRegister);\r\n  yield takeLatest(\"USER_LOGIN\", userLogin);\r\n  yield takeLatest(\"USER_LOGOUT\", userLogout);\r\n  yield takeLatest(\"CHECK_USERNAME\", checkUserName);\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport rootReducer from \"./states/reducers/rootReducer\";\nimport mySaga from \"./states/sagas/sagas\";\nimport createSagaMiddleware from \"redux-saga\";\n\nconst sagaMiddleware = createSagaMiddleware();\n\nlet enhanser, store;\n\ntry {\n  enhanser = compose(\n    applyMiddleware(sagaMiddleware),\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n  );\n  store = createStore(rootReducer, enhanser);\n} catch (err) {\n  store = createStore(rootReducer, applyMiddleware(sagaMiddleware));\n  console.log(err);\n}\n\nsagaMiddleware.run(mySaga);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}